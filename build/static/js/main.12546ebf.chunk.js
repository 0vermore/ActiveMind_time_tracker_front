(this["webpackJsonpactive-mind"]=this["webpackJsonpactive-mind"]||[]).push([[0],{67:function(e,t,n){},68:function(e,t,n){},96:function(e,t,n){"use strict";n.r(t);var a=n(1),o=n.n(a),r=n(19),s=n.n(r),c=(n(67),n(3)),i=n(4),h=n(6),l=n(5),u=(n(68),n(8)),d=n.n(u),j=n(13),p=n(29),b=n(99),g=n(100),O=n(106),f=n(101),m=n(0),v=function(e){Object(h.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).handleChange=function(e){a.setState(Object(p.a)({},e.target.id,e.target.value))},a.handleSubmit=function(e){e.preventDefault(),a.props.handleSubmit({email:a.state.email,password:a.state.password}),localStorage.setItem("hours",0)},a.state={email:"",password:""},a}return Object(i.a)(n,[{key:"validateForm",value:function(){return this.state.email.length>=5&&this.state.password.length>=6}},{key:"render",value:function(){return Object(m.jsx)("div",{className:"Login",children:Object(m.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(m.jsxs)(b.a,{controlId:"email",bssize:"large",children:[Object(m.jsx)(g.a,{children:"Email"}),Object(m.jsx)(O.a,{autoFocus:!0,type:"email",value:this.state.email,onChange:this.handleChange})]}),Object(m.jsxs)(b.a,{controlId:"password",bssize:"large",children:[Object(m.jsx)(g.a,{children:"Password"}),Object(m.jsx)(O.a,{value:this.state.password,onChange:this.handleChange,type:"password"})]}),Object(m.jsx)(f.a,{block:!0,bssize:"large",disabled:!this.validateForm(),type:"submit",children:"Sign in"})]})})}}]),n}(a.Component),x=Object(j.b)((function(e){return{auth:e.auth}}))(v),y="LOAD_NOTES",C="ADD_NOTE",S="UPDATE_NOTE",N="DELETE_NOTE",k="LOAD_PROJECTS",_="LOAD_CATEGORIES",T="LOAD_USERS",w="LOAD_USER",D="AUTHENTICATED",P="UNAUTHENTICATED";function A(e){return{type:y,notes:e}}function I(e,t,n,a,o,r){return{type:S,index:e,project:t,category:n,description:a,hours:o,date:r}}function E(e){return{type:N,index:e}}function U(e){return{type:k,projects:e}}function L(e){return{type:w,user:e.user}}function R(e){return{type:_,categories:e}}function M(e){return{type:T,users:e}}function Y(e){return{type:P,error:e}}var F=n(12),B=n(26),H={API:window.location.origin.includes("localhost")?"http://localhost:4000":window.location.origin.includes("active-mind-api")?"https://active-mind-api.herokuapp.com":"https://portal.milestep.io",SIGN_IN:"/api/signin",SETUP:"/api/setup",NOTES:"/api/notes",PROJECTS:"/api/projects",CATEGORIES:"/api/categories",USERS:"/api/users"},z=Object(F.a)();d.a.defaults.baseURL=H.API,d.a.defaults.timeout=1e4,d.a.defaults.headers={"Access-Control-Allow-Origin":"*"};var G=function(e){Object(h.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).handleSubmit=function(t){var n={email:t.email,password:t.password};d.a.post(H.SIGN_IN,n).then((function(t){e.props.dispatch(L(t.data)),localStorage.setItem("is_admin",t.data.user.is_admin),localStorage.setItem("token",t.data.token),localStorage.setItem("id",t.data.user.id),localStorage.setItem("firstname",t.data.user.firstname),localStorage.setItem("lastname",t.data.user.lastname),z.push("/"),z.go(0)})).catch((function(t){e.props.dispatch(Y("Login failed")),B.b.error("Wrong email or password!",{position:"bottom-center",autoClose:3e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0})}))},e}return Object(i.a)(n,[{key:"render",value:function(){return Object(m.jsx)(x,{handleSubmit:this.handleSubmit})}}]),n}(a.Component),q=Object(j.b)((function(e){return{user:e.user}}))(G),J=n(9),K=function(){return Object(m.jsx)("div",{className:"d-flex justify-content-center",children:Object(m.jsx)("div",{className:"spinner-border",role:"status",children:Object(m.jsx)("span",{className:"sr-only",children:"Loading..."})})})},W=n(102),X=n(57),Q=n(22),V=function(e){Object(h.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).handleSubmit=function(e){e.preventDefault(),a.props.handleSubmit({project_id:a.state.project,category_id:a.state.category,description:a.state.description,hours:a.state.hours,date:a.props.date})},a.state={project:"".concat(localStorage.getItem("project")),category:"".concat(localStorage.getItem("category")),description:"",hours:"".concat(localStorage.getItem("hours"))?"".concat(localStorage.getItem("hours")):0,date:Q.DateTime.now().toISODate()},a.onChangeProject=a.onChangeProject.bind(Object(J.a)(a)),a.onChangeCategory=a.onChangeCategory.bind(Object(J.a)(a)),a.onChangeDescription=a.onChangeDescription.bind(Object(J.a)(a)),a.onChangeHours=a.onChangeHours.bind(Object(J.a)(a)),a.onChangeDate=a.onChangeDate.bind(Object(J.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(J.a)(a)),a}return Object(i.a)(n,[{key:"validateForm",value:function(){return this.state.project.length>0&&this.state.category.length>0&&this.state.hours>0}},{key:"onChangeProject",value:function(e){this.setState({project:e.target.value}),localStorage.setItem("project",e.target.value)}},{key:"onChangeCategory",value:function(e){this.setState({category:e.target.value}),localStorage.setItem("category",e.target.value)}},{key:"onChangeDescription",value:function(e){this.setState({description:e.target.value})}},{key:"onChangeHours",value:function(e){this.setState({hours:e.target.value}),localStorage.setItem("hours",e.target.value)}},{key:"onChangeDate",value:function(e){this.setState({date:e.target.value})}},{key:"render",value:function(){var e=this.props.projects,t=this.props.categories;return Object(m.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(m.jsxs)(W.a,{children:[Object(m.jsx)(X.a,{controlid:"project",sm:!0,children:Object(m.jsxs)(O.a,{value:this.state.project,as:"select",onChange:this.onChangeProject,children:[Object(m.jsx)("option",{value:"",children:"Project"}),e.map((function(e){return Object(m.jsx)("option",{value:e.id,children:e.project},e.id)}))]})}),Object(m.jsx)(X.a,{controlid:"category",sm:!0,children:Object(m.jsxs)(O.a,{value:this.state.category,as:"select",onChange:this.onChangeCategory,children:[Object(m.jsx)("option",{value:"",children:"Category"}),t.map((function(e){return Object(m.jsx)("option",{value:e.id,children:e.category},e.id)}))]})}),Object(m.jsx)(X.a,{controlid:"hours",sm:!0,children:Object(m.jsx)(O.a,{required:!0,placeholder:"Hours",value:this.state.hours,onChange:this.onChangeHours})})]}),Object(m.jsxs)(W.a,{children:[Object(m.jsx)(X.a,{controlid:"description",sm:!0,children:Object(m.jsx)(O.a,{placeholder:"Description (optional)",value:this.state.description,onChange:this.onChangeDescription})}),Object(m.jsx)(X.a,{sm:3,children:Object(m.jsx)(f.a,{block:!0,disabled:!this.validateForm(),type:"submit",children:"Save"})})]})]})}}]),n}(a.Component),Z=n(15),$=n(103),ee=function(e){Object(h.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).handleSubmit=function(e){e.preventDefault(),a.props.onSubmit({id:a.props.note.id,project_id:a.state.project,category_id:a.state.category,description:a.state.description,hours:a.state.hours,date:a.state.date}),a.props.closeModal()},a.state={project:"",category:"",description:a.props.note.description,hours:a.props.note.hours,date:a.props.note.date},a.onChangeProject=a.onChangeProject.bind(Object(J.a)(a)),a.onChangeCategory=a.onChangeCategory.bind(Object(J.a)(a)),a.onChangeDescription=a.onChangeDescription.bind(Object(J.a)(a)),a.onChangeHours=a.onChangeHours.bind(Object(J.a)(a)),a.onChangeDate=a.onChangeDate.bind(Object(J.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(J.a)(a)),a}return Object(i.a)(n,[{key:"validateForm",value:function(){return this.state.project.length>0&&this.state.category.length>0&&this.state.hours>0}},{key:"onChangeProject",value:function(e){this.setState({project:e.target.value})}},{key:"onChangeCategory",value:function(e){this.setState({category:e.target.value})}},{key:"onChangeDescription",value:function(e){this.setState({description:e.target.value})}},{key:"onChangeHours",value:function(e){this.setState({hours:e.target.value})}},{key:"onChangeDate",value:function(e){this.setState({date:e.target.value})}},{key:"render",value:function(){var e=this.props.projects,t=this.props.categories;return Object(m.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(m.jsx)(b.a,{controlid:"project",children:Object(m.jsxs)(O.a,{value:this.state.project,as:"select",onChange:this.onChangeProject,children:[Object(m.jsx)("option",{value:"",children:"Project"}),e.map((function(e){return Object(m.jsx)("option",{value:e.id,children:e.project},e.id)}))]})}),Object(m.jsx)(b.a,{controlid:"category",children:Object(m.jsxs)(O.a,{value:this.state.category,as:"select",onChange:this.onChangeCategory,children:[Object(m.jsx)("option",{value:"",children:"Category"}),t.map((function(e){return Object(m.jsx)("option",{value:e.id,children:e.category},e.id)}))]})}),Object(m.jsx)(b.a,{controlid:"description",children:Object(m.jsx)(O.a,{placeholder:"Description",value:this.state.description,onChange:this.onChangeDescription,type:"text"})}),Object(m.jsx)(b.a,{controlid:"hours",children:Object(m.jsx)(O.a,{required:!0,placeholder:"Hours",value:this.state.hours,onChange:this.onChangeHours})}),Object(m.jsx)(b.a,{controlid:"date",children:Object(m.jsx)(O.a,{controlid:"date",type:"date",required:!0,value:this.state.date,onChange:this.onChangeDate})}),Object(m.jsx)(f.a,{block:!0,disabled:!this.validateForm(),type:"submit",children:"Save"})]})}}]),n}(a.Component),te=n(58),ne=n.n(te),ae=function(e){var t=e.onClickOutside,n=e.onKeyDown,a=e.modalRef,o=e.buttonRef,r=e.closeModal,c=e.onSubmit,i=e.note,h=e.projects,l=e.categories;return s.a.createPortal(Object(m.jsx)(ne.a,{children:Object(m.jsx)("aside",{tag:"aside",role:"dialog",tabIndex:"-1","aria-modal":"true",className:"modal-cover",onClick:t,onKeyDown:n,children:Object(m.jsxs)("div",{className:"modal-area",ref:a,children:[Object(m.jsxs)("button",{ref:o,"aria-label":"Close Modal","aria-labelledby":"close-modal",className:"_modal-close",onClick:r,children:[Object(m.jsx)("span",{id:"close-modal",className:"_hide-visual",children:"Close"}),Object(m.jsx)("svg",{className:"_modal-close-icon",viewBox:"0 0 40 40",children:Object(m.jsx)("path",{d:"M 10,10 L 30,30 M 30,10 L 10,30"})})]}),Object(m.jsx)("div",{className:"modal-body",children:Object(m.jsx)(ee,{onSubmit:c,note:i,projects:h,categories:l,closeModal:r})})]})})}),document.body)},oe=function(e){Object(h.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={isShown:!1},e.showModal=function(){e.setState({isShown:!0},(function(){e.closeButton.focus()})),e.toggleScrollLock()},e.closeModal=function(){e.setState({isShown:!1}),e.toggleScrollLock()},e.onKeyDown=function(t){27===t.keyCode&&e.closeModal()},e.onClickOutside=function(t){e.modal&&e.modal.contains(t.target)||e.closeModal()},e.toggleScrollLock=function(){document.querySelector("html").classList.toggle("scroll-lock")},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.props.note;return Object(m.jsxs)(o.a.Fragment,{children:[Object(m.jsx)(Z.d,{className:"editBtn modal-button",onClick:this.showModal}),this.state.isShown?Object(m.jsx)(ae,{note:t,projects:this.props.projects,categories:this.props.categories,onSubmit:this.props.onSubmit,modalRef:function(t){return e.modal=t},buttonRef:function(t){return e.closeButton=t},closeModal:this.closeModal,onKeyDown:this.onKeyDown,onClickOutside:this.onClickOutside}):null]})}}]),n}(a.Component),re=oe,se=function(e){Object(h.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).deleteNote=function(t){e.props.deleteNote(t)},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.props.note;return Object(m.jsxs)("tr",{id:t.id,children:[Object(m.jsx)("td",{children:t.project_id}),Object(m.jsx)("td",{children:t.category_id}),Object(m.jsx)("td",{children:t.description}),Object(m.jsx)("td",{children:t.hours}),Object(m.jsxs)("td",{children:[Object(m.jsx)(oe,{className:"taskLabel",note:t,projects:this.props.projects,categories:this.props.categories,onSubmit:this.props.updateNote}),Object(m.jsx)(Z.c,{className:"deleteBtn",onClick:function(n){return e.deleteNote(t.id)}})]})]},t.id)}}]),n}(a.Component),ce=function(e){Object(h.a)(n,e);var t=Object(l.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.props.notes;return Object(m.jsxs)($.a,{striped:!0,bordered:!0,hover:!0,children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:"Project"}),Object(m.jsx)("th",{children:"Category"}),Object(m.jsx)("th",{children:"Description"}),Object(m.jsx)("th",{children:"Hours"}),Object(m.jsx)("th",{children:"Actions"})]})}),Object(m.jsx)("tbody",{children:t.map((function(t){return Object(m.jsx)(se,{note:t,id:t.id,updateNote:e.props.updateNote,deleteNote:e.props.deleteNote,projects:e.props.projects,categories:e.props.categories},t.id)}))})]})}}]),n}(a.Component),ie=function(e){Object(h.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={date:Q.DateTime.now().toISODate()},a.onChangeDate=a.onChangeDate.bind(Object(J.a)(a)),a.onDatePlus=a.onDatePlus.bind(Object(J.a)(a)),a.onDateMinus=a.onDateMinus.bind(Object(J.a)(a)),a}return Object(i.a)(n,[{key:"onChangeDate",value:function(e){this.setState({date:e.target.value}),this.props.updateDate(e.target.value)}},{key:"onDatePlus",value:function(e){var t=Q.DateTime.fromISO(this.state.date).plus({days:1});this.setState({date:t.toISODate()}),this.props.updateDate(t.toISODate())}},{key:"onDateMinus",value:function(e){var t=Q.DateTime.fromISO(this.state.date).minus({days:1});this.setState({date:t.toISODate()}),this.props.updateDate(t.toISODate())}},{key:"render",value:function(){for(var e=this,t=0,n=[],a=this.props.notes,o=this.props.projects,r=this.props.categories,s=a.filter((function(t){return t.date===e.state.date})),c=function(e){var t=s[e],a=o.find((function(e){return e.id===t.project_id||e.project===t.project_id})),c=r.find((function(e){return e.id===t.category_id||e.category===t.category_id}));a&&c&&(t.project_id=a.project,t.category_id=c.category,n.push(t))},i=0;i<s.length;i++)c(i);for(var h=0;h<n.length;h++)t+=n[h].hours;return Object(m.jsxs)("div",{children:[Object(m.jsx)("form",{className:"datePickerForm",children:Object(m.jsxs)(W.a,{children:[Object(m.jsx)(X.a,{className:"btnArrowLeft",children:Object(m.jsx)(Z.a,{className:"btnLeft",onClick:this.onDateMinus})}),Object(m.jsx)(X.a,{children:Object(m.jsx)(O.a,{controlid:"date",type:"date",required:!0,value:this.state.date,onChange:this.onChangeDate})}),Object(m.jsx)(X.a,{className:"btnArrowRight",children:Object(m.jsx)(Z.b,{className:"btnRight",onClick:this.onDatePlus})})]})}),Object(m.jsx)("div",{className:"noteTable",children:Object(m.jsx)(ce,{notes:n,projects:o,categories:r,deleteNote:this.props.deleteNote,updateNote:this.props.updateNote})}),Object(m.jsxs)(W.a,{children:[Object(m.jsx)(X.a,{}),Object(m.jsx)(X.a,{}),Object(m.jsx)(X.a,{}),Object(m.jsx)(X.a,{className:"total",children:Object(m.jsxs)("h6",{className:"totalText",children:["Total: ",t.toFixed(1)]})}),Object(m.jsx)(X.a,{})]})]})}}]),n}(a.Component),he=Object(F.a)(),le=function(e){Object(h.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).createNote=function(e){var t=e.user_id,n=e.project_id,o=e.category_id,r=e.description,s=e.hours,c=e.date,i=a.getAuthToken();d.a.post(H.NOTES,{user_id:t,project_id:n,category_id:o,description:r,hours:s,date:c},i).then((function(e){a.props.dispatch(function(e,t,n,a,o,r,s){return{type:C,id:e,user:t,project:n,category:a,description:o,hours:r,date:s}}(e.data.id)),he.go(0)})).catch((function(e){return console.log(e)}))},a.updateDate=function(e){a.setState({date:e})},a.updateNote=function(e){var t=a.getAuthToken();d.a.put(H.NOTES+"/".concat(e.id),{project_id:e.project_id,category_id:e.category_id,description:e.description,hours:e.hours,date:e.date},t).then((function(t){a.props.dispatch(I(e.id))})).catch((function(e){return console.log(e)})),he.go(0)},a.deleteNote=function(e){var t=a.getAuthToken();d.a.delete(H.NOTES+"/".concat(e),t).then((function(t){a.props.dispatch(E(e))})).catch((function(e){return console.log(e)}))},a.state={loading:!0,date:Q.DateTime.now().toISODate()},a.updateDate=a.updateDate.bind(Object(J.a)(a)),a}return Object(i.a)(n,[{key:"getAuthToken",value:function(){return{baseURL:H.API,headers:{Authorization:localStorage.getItem("token")}}}},{key:"getNotes",value:function(){var e=this,t=this.getAuthToken();d.a.get(H.NOTES,t).then((function(t){e.props.dispatch(A(t.data)),e.setState({loading:!1})})).catch((function(e){return console.log(e.message)}))}},{key:"getProjects",value:function(){var e=this,t=this.getAuthToken();d.a.get(H.PROJECTS,t).then((function(t){e.props.dispatch(U(t.data))})).catch((function(e){return console.log(e.message)}))}},{key:"getCategories",value:function(){var e=this,t=this.getAuthToken();d.a.get(H.CATEGORIES,t).then((function(t){e.props.dispatch(R(t.data))})).catch((function(e){return console.log(e.message)}))}},{key:"componentDidMount",value:function(){this.getNotes(),this.getProjects(),this.getCategories()}},{key:"render",value:function(){return Object(m.jsx)("div",{children:Object(m.jsxs)("div",{className:"container",children:[this.state.loading?Object(m.jsx)(K,{}):Object(m.jsx)(V,{projects:this.props.projects,categories:this.props.categories,handleSubmit:this.createNote,date:this.state.date}),Object(m.jsx)("div",{className:"datePicker",children:Object(m.jsx)(ie,{notes:this.props.notes,projects:this.props.projects,categories:this.props.categories,updateNote:this.updateNote,deleteNote:this.deleteNote,updateDate:this.updateDate})})]})})}}]),n}(a.Component),ue=Object(j.b)((function(e){return{notes:e.notes,projects:e.projects,categories:e.categories}}))(le),de=function(e){Object(h.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).deleteNote=function(t){e.props.deleteNote(t)},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.props.note;return Object(m.jsxs)("tr",{id:t.id,children:[Object(m.jsx)("td",{children:t.user_id}),Object(m.jsx)("td",{children:t.project_id}),Object(m.jsx)("td",{children:t.category_id}),Object(m.jsx)("td",{children:t.description}),Object(m.jsx)("td",{children:t.hours}),Object(m.jsxs)("td",{children:[Object(m.jsx)(oe,{className:"taskLabel",note:t,projects:this.props.projects,categories:this.props.categories,onSubmit:this.props.updateNote}),Object(m.jsx)(Z.c,{className:"deleteBtn",onClick:function(n){return e.deleteNote(t.id)}})]})]},t.id)}}]),n}(a.Component),je=function(e){Object(h.a)(n,e);var t=Object(l.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.props.notes;return Object(m.jsxs)($.a,{striped:!0,bordered:!0,hover:!0,children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:"User"}),Object(m.jsx)("th",{children:"Project"}),Object(m.jsx)("th",{children:"Category"}),Object(m.jsx)("th",{children:"Description"}),Object(m.jsx)("th",{children:"Hours"}),Object(m.jsx)("th",{children:"Actions"})]})}),Object(m.jsx)("tbody",{children:t.map((function(t){return Object(m.jsx)(de,{note:t,id:t.id,updateNote:e.props.updateNote,deleteNote:e.props.deleteNote,projects:e.props.projects,categories:e.props.categories},t.id)}))})]})}}]),n}(a.Component),pe=function(e){Object(h.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={date:Q.DateTime.now().toISODate()},a.onChangeDate=a.onChangeDate.bind(Object(J.a)(a)),a.onDatePlus=a.onDatePlus.bind(Object(J.a)(a)),a.onDateMinus=a.onDateMinus.bind(Object(J.a)(a)),a}return Object(i.a)(n,[{key:"onChangeDate",value:function(e){this.setState({date:e.target.value})}},{key:"onDatePlus",value:function(e){var t=Q.DateTime.fromISO(this.state.date).plus({days:1});this.setState({date:t.toISODate()})}},{key:"onDateMinus",value:function(e){var t=Q.DateTime.fromISO(this.state.date).minus({days:1});this.setState({date:t.toISODate()})}},{key:"render",value:function(){var e=this,t=0,n=this.props.users_filter,a=this.props.projects_filter,o=this.props.categories_filter,r=[],s=this.props.notes,c=this.props.users,i=this.props.projects,h=this.props.categories;if(""!==n){var l=c.find((function(e){return e.id===parseInt(n)}));n=l.firstname+" "+l.lastname}if(""!==a){var u=i.find((function(e){return e.id===parseInt(a)}));a=u.project}if(""!==o){var d=h.find((function(e){return e.id===parseInt(o)}));o=d.category}for(var j=s.filter((function(t){return t.date===e.state.date})),p=function(e){var t=j[e],n=c.find((function(e){return e.id===t.user_id||e.firstname+" "+e.lastname===t.user_id})),a=i.find((function(e){return e.id===t.project_id||e.project===t.project_id})),o=h.find((function(e){return e.id===t.category_id||e.category===t.category_id}));n&&a&&o&&(t.user_id=n.firstname+" "+n.lastname,t.project_id=a.project,t.category_id=o.category,r.push(t))},b=0;b<j.length;b++)p(b);for(var g=[],f=0;f<r.length;f++)r[f].user_id.indexOf(n)>-1&&r[f].project_id.indexOf(a)>-1&&r[f].category_id.indexOf(o)>-1&&g.push(r[f]);for(var v=0;v<g.length;v++)t+=g[v].hours;return Object(m.jsxs)("div",{children:[Object(m.jsx)("form",{className:"datePickerForm",children:Object(m.jsxs)(W.a,{children:[Object(m.jsx)(X.a,{className:"btnArrowLeft",children:Object(m.jsx)(Z.a,{className:"btnLeft",onClick:this.onDateMinus})}),Object(m.jsx)(X.a,{children:Object(m.jsx)(O.a,{controlid:"date",type:"date",required:!0,value:this.state.date,onChange:this.onChangeDate})}),Object(m.jsx)(X.a,{className:"btnArrowRight",children:Object(m.jsx)(Z.b,{className:"btnRight",onClick:this.onDatePlus})})]})}),Object(m.jsx)("div",{className:"noteTable",children:Object(m.jsx)(je,{notes:g,projects:i,categories:h,deleteNote:this.props.deleteNote,updateNote:this.props.updateNote})}),Object(m.jsxs)(W.a,{children:[Object(m.jsx)(X.a,{}),Object(m.jsx)(X.a,{}),Object(m.jsx)(X.a,{}),Object(m.jsx)(X.a,{}),Object(m.jsx)(X.a,{className:"total",children:Object(m.jsxs)("h6",{className:"totalText",children:["Total: ",t.toFixed(1)]})}),Object(m.jsx)(X.a,{})]})]})}}]),n}(a.Component),be=function(e){Object(h.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={user:"",project:"",category:""},a.onChangeUser=a.onChangeUser.bind(Object(J.a)(a)),a.onChangeProject=a.onChangeProject.bind(Object(J.a)(a)),a.onChangeCategory=a.onChangeCategory.bind(Object(J.a)(a)),a}return Object(i.a)(n,[{key:"onChangeUser",value:function(e){this.setState({user:e.target.value})}},{key:"onChangeProject",value:function(e){this.setState({project:e.target.value})}},{key:"onChangeCategory",value:function(e){this.setState({category:e.target.value})}},{key:"render",value:function(){var e=this.props.users.filter((function(e){return!0!==e.is_admin})),t=this.props.projects,n=this.props.categories;return Object(m.jsxs)("div",{children:[Object(m.jsx)("form",{children:Object(m.jsxs)(W.a,{children:[Object(m.jsx)(X.a,{sm:2,children:Object(m.jsx)("h4",{className:"filtersLabel",children:"Filters:"})}),Object(m.jsx)(X.a,{sm:3,controlid:"user",children:Object(m.jsxs)(O.a,{value:this.state.user,as:"select",onChange:this.onChangeUser,children:[Object(m.jsx)("option",{value:"",children:"User"}),e.map((function(e){return Object(m.jsx)("option",{value:e.id,children:e.firstname+" "+e.lastname},e.id)}))]})}),Object(m.jsx)(X.a,{sm:3,controlid:"project",children:Object(m.jsxs)(O.a,{value:this.state.project,as:"select",onChange:this.onChangeProject,children:[Object(m.jsx)("option",{value:"",children:"Project"}),t.map((function(e){return Object(m.jsx)("option",{value:e.id,children:e.project},e.id)}))]})}),Object(m.jsx)(X.a,{sm:3,controlid:"category",children:Object(m.jsxs)(O.a,{value:this.state.category,as:"select",onChange:this.onChangeCategory,children:[Object(m.jsx)("option",{value:"",children:"Category"}),n.map((function(e){return Object(m.jsx)("option",{value:e.id,children:e.category},e.id)}))]})})]})}),Object(m.jsx)("div",{className:"datePicker",children:Object(m.jsx)(pe,{notes:this.props.notes,users:e,projects:t,categories:n,users_filter:this.state.user,projects_filter:this.state.project,categories_filter:this.state.category,updateNote:this.props.updateNote,deleteNote:this.props.deleteNote})})]})}}]),n}(a.Component),ge=Object(F.a)(),Oe=function(e){Object(h.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).updateNote=function(e){var t=a.getAuthToken();d.a.put(H.NOTES+"/".concat(e.id),{project_id:e.project_id,category_id:e.category_id,description:e.description,hours:e.hours,date:e.date},t).then((function(t){a.props.dispatch(I(e.id))})).catch((function(e){return console.log(e)})),ge.go(0)},a.deleteNote=function(e){var t=a.getAuthToken();d.a.delete(H.NOTES+"/".concat(e),t).then((function(t){a.props.dispatch(E(e))})).catch((function(e){return console.log(e)}))},a.state={loading:!0},a}return Object(i.a)(n,[{key:"getAuthToken",value:function(){return{baseURL:H.API,headers:{Authorization:localStorage.getItem("token")}}}},{key:"getNotes",value:function(){var e=this,t=this.getAuthToken();d.a.get(H.NOTES,t).then((function(t){e.props.dispatch(A(t.data)),e.setState({loading:!1})})).catch((function(e){return console.log(e.message)}))}},{key:"getProjects",value:function(){var e=this,t=this.getAuthToken();d.a.get(H.PROJECTS,t).then((function(t){e.props.dispatch(U(t.data))})).catch((function(e){return console.log(e.message)}))}},{key:"getCategories",value:function(){var e=this,t=this.getAuthToken();d.a.get(H.CATEGORIES,t).then((function(t){e.props.dispatch(R(t.data))})).catch((function(e){return console.log(e.message)}))}},{key:"getUsers",value:function(){var e=this,t=this.getAuthToken();d.a.get(H.USERS,t).then((function(t){e.props.dispatch(M(t.data))})).catch((function(e){return console.log(e.message)}))}},{key:"componentDidMount",value:function(){this.getNotes(),this.getProjects(),this.getCategories(),this.getUsers()}},{key:"render",value:function(){return Object(m.jsx)("div",{children:Object(m.jsx)("div",{className:"container",children:this.state.loading?Object(m.jsx)(K,{}):Object(m.jsx)(be,{notes:this.props.notes,users:this.props.users,projects:this.props.projects,categories:this.props.categories,updateNote:this.updateNote,deleteNote:this.deleteNote})})})}}]),n}(a.Component),fe=Object(j.b)((function(e){return{notes:e.notes,projects:e.projects,categories:e.categories,users:e.users}}))(Oe),me=(n(93),function(e){Object(h.a)(n,e);var t=Object(l.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return!1===this.props.auth.authenticated?Object(m.jsx)(q,{}):"true"===localStorage.getItem("is_admin")?Object(m.jsx)(fe,{}):Object(m.jsx)(ue,{})}}]),n}(a.Component)),ve=Object(j.b)((function(e){return{user:e.user.user,auth:e.auth}}))(me),xe=Object(F.a)(),ye=function(e){Object(h.a)(n,e);var t=Object(l.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"componentWillMount",value:function(){this.props.dispatch(Y()),localStorage.removeItem("token"),localStorage.removeItem("firstname"),localStorage.removeItem("lastname"),localStorage.removeItem("is_admin"),localStorage.removeItem("id"),xe.push("/"),xe.go(0)}},{key:"render",value:function(){return null}}]),n}(a.Component),Ce=Object(j.b)()(ye),Se=function(e){Object(h.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).handleChange=function(e){a.setState(Object(p.a)({},e.target.id,e.target.value))},a.handleSubmit=function(e){e.preventDefault(),a.props.handleSubmit({password:a.state.password})},a.state={password:"",password_confirmation:""},a}return Object(i.a)(n,[{key:"validateForm",value:function(){return this.state.password.length>5&&this.state.password===this.state.password_confirmation}},{key:"render",value:function(){return Object(m.jsx)("div",{className:"Login",children:Object(m.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(m.jsxs)(b.a,{controlId:"password",bssize:"large",children:[Object(m.jsx)(g.a,{children:"New password:"}),Object(m.jsx)(O.a,{autoFocus:!0,type:"password",value:this.state.password,onChange:this.handleChange})]}),Object(m.jsxs)(b.a,{controlId:"password_confirmation",bssize:"large",children:[Object(m.jsx)(g.a,{children:"Password confirmation:"}),Object(m.jsx)(O.a,{value:this.state.password_confirmation,onChange:this.handleChange,type:"password"})]}),Object(m.jsx)(f.a,{block:!0,bssize:"large",disabled:!this.validateForm(),type:"submit",children:"Save"})]})})}}]),n}(a.Component),Ne=Object(F.a)(),ke=function(e){Object(h.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).handleSubmit=function(t){var n=e.getAuthToken();d.a.put(H.SETUP+"/".concat(localStorage.getItem("id")),{password:t.password},n).then((function(e){Ne.push("/"),Ne.go(0)})).catch((function(e){console.log(e.message)}))},e}return Object(i.a)(n,[{key:"getAuthToken",value:function(){return{baseURL:H.API,headers:{Authorization:localStorage.getItem("token")}}}},{key:"render",value:function(){return Object(m.jsx)(Se,{handleSubmit:this.handleSubmit})}}]),n}(a.Component),_e=function(e){Object(h.a)(n,e);var t=Object(l.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return B.b.error("Wrong email or password!",{position:"bottom-center",autoClose:3e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0}),Object(m.jsx)("div",{className:"container",children:Object(m.jsxs)("div",{className:"header",children:[Object(m.jsx)("h1",{children:"Page Not Found"}),Object(m.jsx)("label",{children:"Error 404"})]})})}}]),n}(a.Component),Te=n(104),we=n(105),De=n(23),Pe=function(e){Object(h.a)(n,e);var t=Object(l.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return Object(m.jsxs)(Te.a,{collapseOnSelect:!0,expand:"lg",bg:"light",variant:"light",children:[Object(m.jsx)(Te.a.Brand,{children:Object(m.jsx)(De.b,{to:"/",children:"MileStep Portal"})}),this.props.auth.authenticated&&Object(m.jsx)(Te.a.Brand,{children:localStorage.getItem("firstname")+" "+localStorage.getItem("lastname")}),Object(m.jsx)(Te.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(m.jsx)(Te.a.Collapse,{id:"responsive-navbar-nav",children:Object(m.jsxs)(we.a,{className:"ml-auto",children:[!this.props.auth.authenticated&&Object(m.jsx)(Te.a.Brand,{children:Object(m.jsx)(De.b,{to:"/login",children:"Login"})}),this.props.auth.authenticated&&"true"===localStorage.getItem("is_admin")&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(Te.a.Brand,{children:Object(m.jsx)(De.b,{to:"/reports",children:"Reports"})}),Object(m.jsx)(Te.a.Brand,{children:Object(m.jsx)(De.b,{to:"/manage",children:"Manage"})})]}),this.props.auth.authenticated&&"false"===localStorage.getItem("is_admin")&&Object(m.jsx)(Te.a.Brand,{children:Object(m.jsx)(De.b,{to:"/my-report",children:"Report"})}),this.props.auth.authenticated&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(Te.a.Brand,{children:Object(m.jsx)(De.b,{to:"/settings",children:"Settings"})}),Object(m.jsx)(Te.a.Brand,{children:Object(m.jsx)(De.b,{to:"/logout",children:"Logout"})})]})]})})]})}}]),n}(a.Component),Ae=Object(j.b)((function(e){return{auth:e.auth}}))(Pe),Ie=function(e){Object(h.a)(n,e);var t=Object(l.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.getCurrentUser()}},{key:"getCurrentUser",value:function(){var e=this,t=this.getAuthToken();d.a.post(H.SIGN_IN,t).then((function(t){e.props.dispatch(L(t.data))})).catch((function(e){console.log(e)}))}},{key:"getAuthToken",value:function(){return{baseURL:"".concat("https://portal.milestep.io'"),headers:{Authorization:localStorage.getItem("token")}}}},{key:"render",value:function(){return Object(m.jsx)("div",{})}}]),n}(a.Component),Ee=Object(j.b)((function(e){return{user:e.user.user,users:e.users,projects:e.projects,categories:e.categories}}))(Ie),Ue=function(e){Object(h.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).handleSubmit=function(e){e.preventDefault(),a.props.handleSubmit({email:a.state.email,firstname:a.state.firstname,lastname:a.state.lastname,password:a.state.password})},a.state={email:"",firstname:"",lastname:"",password:""},a.onChangeEmail=a.onChangeEmail.bind(Object(J.a)(a)),a.onChangeFirstname=a.onChangeFirstname.bind(Object(J.a)(a)),a.onChangeLastname=a.onChangeLastname.bind(Object(J.a)(a)),a.onChangePassword=a.onChangePassword.bind(Object(J.a)(a)),a}return Object(i.a)(n,[{key:"onChangeEmail",value:function(e){this.setState({email:e.target.value})}},{key:"onChangeFirstname",value:function(e){this.setState({firstname:e.target.value})}},{key:"onChangeLastname",value:function(e){this.setState({lastname:e.target.value})}},{key:"onChangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"render",value:function(){var e=this;return Object(m.jsxs)("form",{onSubmit:function(t){return e.handleSubmit(t)},children:[Object(m.jsx)(W.a,{controlid:"email",sm:!0,className:"mb-2",children:Object(m.jsx)(O.a,{required:!0,placeholder:"Email",onChange:this.onChangeEmail})}),Object(m.jsx)(W.a,{controlid:"firstname",sm:!0,className:"mb-2",children:Object(m.jsx)(O.a,{required:!0,placeholder:"First Name",onChange:this.onChangeFirstname})}),Object(m.jsx)(W.a,{controlid:"lastname",sm:!0,className:"mb-2",children:Object(m.jsx)(O.a,{required:!0,placeholder:"Last Name",onChange:this.onChangeLastname})}),Object(m.jsx)(W.a,{controlid:"password",sm:!0,className:"mb-2",children:Object(m.jsx)(O.a,{required:!0,placeholder:"Password",onChange:this.onChangePassword})}),Object(m.jsx)(f.a,{type:"submit",children:"Create"})]})}}]),n}(a.Component),Le=function(e){Object(h.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).handleSubmit=function(e){e.preventDefault(),a.props.handleSubmit({project:a.state.project})},a.state={project:""},a.onChangeProject=a.onChangeProject.bind(Object(J.a)(a)),a}return Object(i.a)(n,[{key:"onChangeProject",value:function(e){this.setState({project:e.target.value})}},{key:"render",value:function(){var e=this;return Object(m.jsxs)("form",{onSubmit:function(t){return e.handleSubmit(t)},children:[Object(m.jsx)(W.a,{controlid:"project",sm:!0,className:"mb-2",children:Object(m.jsx)(O.a,{required:!0,placeholder:"Project Name",onChange:this.onChangeProject})}),Object(m.jsx)(f.a,{type:"submit",children:"Create"})]})}}]),n}(a.Component),Re=function(e){Object(h.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).handleSubmit=function(e){e.preventDefault(),a.props.handleSubmit({category:a.state.category})},a.state={category:""},a.onChangeCategory=a.onChangeCategory.bind(Object(J.a)(a)),a}return Object(i.a)(n,[{key:"onChangeCategory",value:function(e){this.setState({category:e.target.value})}},{key:"render",value:function(){var e=this;return Object(m.jsxs)("form",{onSubmit:function(t){return e.handleSubmit(t)},children:[Object(m.jsx)(W.a,{controlid:"category",sm:!0,className:"mb-2",children:Object(m.jsx)(O.a,{required:!0,placeholder:"Category Name",onChange:this.onChangeCategory})}),Object(m.jsx)(f.a,{type:"submit",children:"Create"})]})}}]),n}(a.Component),Me=function(e){Object(h.a)(n,e);var t=Object(l.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this;return Object(m.jsx)("div",{className:"border border-secondary rounded",children:Object(m.jsxs)("table",{className:"table",children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{scope:"col",children:"#"}),Object(m.jsx)("th",{scope:"col",children:"Name"}),Object(m.jsx)("th",{scope:"col",children:"Last Name"}),Object(m.jsx)("th",{scope:"col"})]})}),Object(m.jsx)("tbody",{children:this.props.users.map((function(t,n){return Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:n+1}),Object(m.jsx)("td",{children:t.firstname}),Object(m.jsx)("td",{children:t.lastname}),Object(m.jsx)("td",{className:"text-right",children:Object(m.jsx)(Z.c,{className:"deleteBtn",onClick:function(n){return e.props.deleteUser(t.id)},children:"X"})})]})}))})]})})}}]),n}(a.Component),Ye=function(e){Object(h.a)(n,e);var t=Object(l.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this;return Object(m.jsx)("div",{className:"border border-secondary rounded",children:Object(m.jsxs)("table",{className:"table",children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{scope:"col",children:"#"}),Object(m.jsx)("th",{scope:"col",children:"Name"}),Object(m.jsx)("th",{scope:"col"})]})}),Object(m.jsx)("tbody",{children:this.props.projects.map((function(t,n){return Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:n+1}),Object(m.jsx)("td",{children:t.project}),Object(m.jsxs)("td",{className:"text-right",children:[Object(m.jsx)(re,{className:"taskLabel",projects:e.props.projects,categories:e.props.categories,onSubmit:e.props.updateNote}),Object(m.jsx)(Z.c,{className:"deleteBtn",onClick:function(n){return e.props.deleteProject(t.id)},children:"X"})]})]})}))})]})})}}]),n}(a.Component),Fe=function(e){Object(h.a)(n,e);var t=Object(l.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this;return Object(m.jsx)("div",{className:"border border-secondary rounded",children:Object(m.jsxs)("table",{className:"table",children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{scope:"col",children:"#"}),Object(m.jsx)("th",{scope:"col",children:"Name"}),Object(m.jsx)("th",{scope:"col"})]})}),Object(m.jsx)("tbody",{children:this.props.categories.map((function(t,n){return Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:n+1}),Object(m.jsx)("td",{children:t.category}),Object(m.jsx)("td",{className:"text-right",children:Object(m.jsx)(Z.c,{className:"deleteBtn",onClick:function(n){return e.props.deleteCategory(t.id)},children:"X"})})]})}))})]})})}}]),n}(a.Component),Be=(n(55),Object(F.a)()),He=function(e){return B.b.error(e,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})},ze=function(e){Object(h.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).createUser=function(t){var n=t.firstname,a=t.lastname,o=t.email,r=t.password,s=e.getAuthToken();d.a.post(H.USERS,{firstname:n,lastname:a,email:o,password:r},s).then((function(e){Be.go(0)})).catch((function(e){return He(e.response.data.error)}))},e.createCategory=function(t){var n=t.category,a=e.getAuthToken();d.a.post(H.CATEGORIES,{category:n},a).then((function(e){Be.go(0)})).catch((function(e){return He(e.response.data.error)}))},e.createProject=function(t){var n=t.project,a=e.getAuthToken();d.a.post(H.PROJECTS,{project:n},a).then((function(e){Be.go(0)})).catch((function(e){return He(e.response.data.error)}))},e.deleteUser=function(t){var n=window.confirm("Are you sure you want to delete?"),a=e.getAuthToken();n&&d.a.delete(H.USERS+"/".concat(t),a).then((function(e){Be.go(0)})).catch((function(e){return console.log(e)}))},e.deleteCategory=function(t){var n=window.confirm("Are you sure you want to delete?"),a=e.getAuthToken();n&&d.a.delete(H.CATEGORIES+"/".concat(t),a).then((function(e){Be.go(0)})).catch((function(e){return console.log(e)}))},e.deleteProject=function(t){var n=window.confirm("Are you sure you want to delete?"),a=e.getAuthToken();n&&d.a.delete(H.PROJECTS+"/".concat(t),a).then((function(e){Be.go(0)})).catch((function(e){return console.log(e)}))},e}return Object(i.a)(n,[{key:"getAuthToken",value:function(){return{baseURL:H.API,headers:{Authorization:localStorage.getItem("token")}}}},{key:"getCurrentUser",value:function(){var e=this,t=this.getAuthToken();d.a.post(H.SIGN_IN,t).then((function(t){e.props.dispatch(L(t.data)),e.getUser()})).catch((function(e){console.log(e)}))}},{key:"getUser",value:function(){this.props.user&&!0===this.props.user.is_admin?(this.getUsers(),this.getProjects(),this.getCategories()):(He("\ud83d\udea8You are not admin!\ud83d\udea8"),Be.push("/"),Be.go(0))}},{key:"getUsers",value:function(){var e=this,t=this.getAuthToken();d.a.get(H.USERS,t).then((function(t){e.props.dispatch(M(t.data))})).catch((function(e){return console.log(e.message)}))}},{key:"getNotes",value:function(){var e=this,t=this.getAuthToken();d.a.get(H.NOTES,t).then((function(t){e.props.dispatch(A(t.data)),e.setState({loading:!1})})).catch((function(e){return console.log(e.message)}))}},{key:"getProjects",value:function(){var e=this,t=this.getAuthToken();d.a.get(H.PROJECTS,t).then((function(t){e.props.dispatch(U(t.data))})).catch((function(e){return console.log(e.message)}))}},{key:"getCategories",value:function(){var e=this,t=this.getAuthToken();d.a.get(H.CATEGORIES,t).then((function(t){e.props.dispatch(R(t.data))})).catch((function(e){return console.log(e.message)}))}},{key:"componentDidMount",value:function(){this.getCurrentUser(),this.getNotes()}},{key:"render",value:function(){return Object(m.jsxs)("div",{className:"p-3",children:[Object(m.jsxs)(W.a,{children:[Object(m.jsxs)(X.a,{className:"shadow p-4 m-3 bg-white rounded",children:[Object(m.jsx)("h3",{children:"Create User"}),Object(m.jsx)(Ue,{handleSubmit:this.createUser})]}),Object(m.jsxs)(X.a,{className:"shadow p-4 m-3 bg-white rounded",children:[Object(m.jsx)("h3",{children:"Create Category"}),Object(m.jsx)(Re,{handleSubmit:this.createCategory})]}),Object(m.jsxs)(X.a,{className:"shadow p-4 m-3 bg-white rounded",children:[Object(m.jsx)("h3",{children:"Create Project"}),Object(m.jsx)(Le,{handleSubmit:this.createProject})]})]}),Object(m.jsxs)(W.a,{children:[Object(m.jsxs)(X.a,{className:"shadow p-4 m-3 bg-white rounded",children:[Object(m.jsx)("h3",{children:"Users List"}),Object(m.jsx)(Me,{users:this.props.users,deleteUser:this.deleteUser})]}),Object(m.jsxs)(X.a,{className:"shadow p-4 m-3 bg-white rounded",children:[Object(m.jsx)("h3",{children:"Categories List"}),Object(m.jsx)(Fe,{categories:this.props.categories,deleteCategory:this.deleteCategory})]}),Object(m.jsxs)(X.a,{className:"shadow p-4 m-3 bg-white rounded",children:[Object(m.jsx)("h3",{children:"Projects List"}),Object(m.jsx)(Ye,{projects:this.props.projects,deleteProject:this.deleteProject})]})]})]})}}]),n}(a.Component),Ge=Object(j.b)((function(e){return{user:e.user.user,users:e.users,projects:e.projects,categories:e.categories}}))(ze),qe=n(28),Je=n(61),Ke=n(31),We=n(62);var Xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return t.notes;case C:return[].concat(Object(We.a)(e),[{id:t.id,user_id:t.user_id,project_id:t.project_id,category_id:t.category_id,description:t.description,hours:t.hours,date:t.date}]);case S:return e.map((function(e){return e.id===t.index?Object(Ke.a)(Object(Ke.a)({},e),{},{project_id:t.project_id,category_id:t.category_id,description:t.description,hours:t.hours,date:t.date}):e}));case N:return e.filter((function(e){return e.id!==t.index}));default:return e}};var Qe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case D:return Object(Ke.a)(Object(Ke.a)({},e),{},{authenticated:!0});case P:return{state:[],authenticated:!1,error:t.error};default:return e}};var Ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:return t.projects;default:return e}};var Ze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _:return t.categories;default:return e}};var $e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T:return t.users;default:return e}};var et=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return{user:t.user};default:return e}},tt=Object(qe.c)({notes:Xe,auth:Qe,projects:Ve,categories:Ze,users:$e,user:et});var nt=n(14),at=n(35),ot=function(e){Object(h.a)(n,e);var t=Object(l.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=0,t=this.props.users_filter,n=this.props.projects_filter,a=this.props.monthYear_filter,o=[],r=this.props.notes,s=this.props.users,c=this.props.projects,i=this.props.categories;if(""!==t){var h=s.find((function(e){return e.id===parseInt(t)}));t=h.firstname+" "+h.lastname}if(""!==n){var l=c.find((function(e){return e.id===parseInt(n)}));n=l.project}for(var u=r.filter((function(e){return e.date.includes(a)})),d=function(e){var t=u[e],n=s.find((function(e){return e.id===t.user_id||e.firstname+" "+e.lastname===t.user_id})),a=c.find((function(e){return e.id===t.project_id||e.project===t.project_id})),r=i.find((function(e){return e.id===t.category_id||e.category===t.category_id}));n&&a&&r&&(t.user_id=n.firstname+" "+n.lastname,t.project_id=a.project,t.category_id=r.category,o.push(t))},j=0;j<u.length;j++)d(j);for(var p=[],b=0;b<o.length;b++)o[b].user_id.indexOf(t)>-1&&o[b].project_id.indexOf(n)>-1&&p.push(o[b]);for(var g=0;g<p.length;g++)e+=p[g].hours;return Object(m.jsxs)("div",{children:[Object(m.jsx)("div",{className:"reportsTable",children:Object(m.jsx)(je,{notes:p,projects:c,categories:i,deleteNote:this.props.deleteNote,updateNote:this.props.updateNote})}),Object(m.jsxs)(W.a,{children:[Object(m.jsx)(X.a,{}),Object(m.jsx)(X.a,{}),Object(m.jsx)(X.a,{}),Object(m.jsx)(X.a,{}),Object(m.jsx)(X.a,{className:"total",children:Object(m.jsxs)("h6",{className:"totalText",children:["Total: ",e.toFixed(1)]})}),Object(m.jsx)(X.a,{})]})]})}}]),n}(a.Component),rt=function(e){Object(h.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={user:"",project:"",monthYear:at(new Date).format("YYYY-MM")},a.onChangeUser=a.onChangeUser.bind(Object(J.a)(a)),a.onChangeProject=a.onChangeProject.bind(Object(J.a)(a)),a.onChangeMonthYear=a.onChangeMonthYear.bind(Object(J.a)(a)),a}return Object(i.a)(n,[{key:"onChangeUser",value:function(e){this.setState({user:e.target.value})}},{key:"onChangeProject",value:function(e){this.setState({project:e.target.value})}},{key:"onChangeMonthYear",value:function(e){this.setState({monthYear:e.target.value})}},{key:"render",value:function(){var e=this.props.users.filter((function(e){return!0!==e.is_admin})),t=this.props.projects,n=this.props.categories;return Object(m.jsxs)("div",{children:[Object(m.jsx)("form",{children:Object(m.jsxs)(W.a,{children:[Object(m.jsx)(X.a,{sm:2,children:Object(m.jsx)("span",{className:"reportsLabel",children:"Report:"})}),Object(m.jsx)(X.a,{sm:3,controlid:"user",children:Object(m.jsxs)(O.a,{value:this.state.user,as:"select",onChange:this.onChangeUser,children:[Object(m.jsx)("option",{value:"",children:"User"}),e.map((function(e){return Object(m.jsx)("option",{value:e.id,children:e.firstname+" "+e.lastname},e.id)}))]})}),Object(m.jsx)(X.a,{sm:3,controlid:"project",children:Object(m.jsxs)(O.a,{value:this.state.project,as:"select",onChange:this.onChangeProject,children:[Object(m.jsx)("option",{value:"",children:"Project"}),t.map((function(e){return Object(m.jsx)("option",{value:e.id,children:e.project},e.id)}))]})}),Object(m.jsx)(X.a,{sm:3,controlid:"monthYear",children:Object(m.jsx)(O.a,{value:this.state.monthYear,type:"month",min:"2021-03",onChange:this.onChangeMonthYear})})]})}),Object(m.jsx)("div",{children:Object(m.jsx)(ot,{notes:this.props.notes,users:e,projects:t,categories:n,users_filter:this.state.user,projects_filter:this.state.project,monthYear_filter:this.state.monthYear,updateNote:this.props.updateNote,deleteNote:this.props.deleteNote})})]})}}]),n}(a.Component),st=Object(F.a)(),ct=function(e){Object(h.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).updateNote=function(e){var t=a.getAuthToken();d.a.put(H.NOTES+"/".concat(e.id),{project_id:e.project_id,category_id:e.category_id,description:e.description,hours:e.hours,date:e.date},t).then((function(t){a.props.dispatch(I(e.id))})).catch((function(e){return console.log(e)})),st.go(0)},a.deleteNote=function(e){var t=a.getAuthToken();d.a.delete(H.NOTES+"/".concat(e),t).then((function(t){a.props.dispatch(E(e))})).catch((function(e){return console.log(e)}))},a.state={loading:!0},a}return Object(i.a)(n,[{key:"getAuthToken",value:function(){return{baseURL:H.API,headers:{Authorization:localStorage.getItem("token")}}}},{key:"getNotes",value:function(){var e=this,t=this.getAuthToken();d.a.get(H.NOTES,t).then((function(t){e.props.dispatch(A(t.data)),e.setState({loading:!1})})).catch((function(e){return console.log(e.message)}))}},{key:"getProjects",value:function(){var e=this,t=this.getAuthToken();d.a.get(H.PROJECTS,t).then((function(t){e.props.dispatch(U(t.data))})).catch((function(e){return console.log(e.message)}))}},{key:"getCategories",value:function(){var e=this,t=this.getAuthToken();d.a.get(H.CATEGORIES,t).then((function(t){e.props.dispatch(R(t.data))})).catch((function(e){return console.log(e.message)}))}},{key:"getUsers",value:function(){var e=this,t=this.getAuthToken();d.a.get(H.USERS,t).then((function(t){e.props.dispatch(M(t.data))})).catch((function(e){return console.log(e.message)}))}},{key:"componentDidMount",value:function(){this.getNotes(),this.getProjects(),this.getCategories(),this.getUsers()}},{key:"render",value:function(){return Object(m.jsx)("div",{children:Object(m.jsx)("div",{className:"container",children:this.state.loading?Object(m.jsx)(K,{}):Object(m.jsx)(rt,{notes:this.props.notes,users:this.props.users,projects:this.props.projects,categories:this.props.categories,updateNote:this.updateNote,deleteNote:this.deleteNote})})})}}]),n}(a.Component),it=Object(j.b)((function(e){return{notes:e.notes,projects:e.projects,categories:e.categories,users:e.users}}))(ct),ht=function(e){Object(h.a)(n,e);var t=Object(l.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=0,t=this.props.projects_filter,n=this.props.monthYear_filter,a=[],o=this.props.notes,r=this.props.projects,s=this.props.categories;if(""!==t){var c=r.find((function(e){return e.id===parseInt(t)}));t=c.project}for(var i=o.filter((function(e){return e.date.includes(n)})),h=function(e){var t=i[e],n=r.find((function(e){return e.id===t.project_id||e.project===t.project_id})),o=s.find((function(e){return e.id===t.category_id||e.category===t.category_id}));n&&o&&(t.project_id=n.project,t.category_id=o.category,a.push(t))},l=0;l<i.length;l++)h(l);for(var u=[],d=0;d<a.length;d++)a[d].project_id.indexOf(t)>-1&&u.push(a[d]);for(var j=0;j<u.length;j++)e+=u[j].hours;return Object(m.jsxs)("div",{children:[Object(m.jsx)("div",{className:"reportsTable",children:Object(m.jsx)(ce,{notes:u,projects:r,categories:s,deleteNote:this.props.deleteNote,updateNote:this.props.updateNote})}),Object(m.jsxs)(W.a,{children:[Object(m.jsx)(X.a,{}),Object(m.jsx)(X.a,{}),Object(m.jsx)(X.a,{}),Object(m.jsx)(X.a,{className:"total",children:Object(m.jsxs)("h6",{className:"totalText",children:["Total: ",e.toFixed(1)]})}),Object(m.jsx)(X.a,{})]})]})}}]),n}(a.Component),lt=function(e){Object(h.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={project:"",monthYear:at(new Date).format("YYYY-MM")},a.onChangeProject=a.onChangeProject.bind(Object(J.a)(a)),a.onChangeMonthYear=a.onChangeMonthYear.bind(Object(J.a)(a)),a}return Object(i.a)(n,[{key:"onChangeProject",value:function(e){this.setState({project:e.target.value})}},{key:"onChangeMonthYear",value:function(e){this.setState({monthYear:e.target.value})}},{key:"render",value:function(){var e=this.props.projects,t=this.props.categories;return Object(m.jsxs)("div",{children:[Object(m.jsx)("form",{children:Object(m.jsxs)(W.a,{style:{justifyContent:"center"},children:[Object(m.jsx)(X.a,{sm:2,style:{maxWidth:"130px",padding:"0px"},children:Object(m.jsx)("span",{className:"reportsLabel",children:"Report for:"})}),Object(m.jsx)(X.a,{sm:3,controlid:"project",children:Object(m.jsxs)(O.a,{value:this.state.project,as:"select",onChange:this.onChangeProject,children:[Object(m.jsx)("option",{value:"",children:"Project"}),e.map((function(e){return Object(m.jsx)("option",{value:e.id,children:e.project},e.id)}))]})}),Object(m.jsx)(X.a,{sm:3,controlid:"monthYear",children:Object(m.jsx)(O.a,{value:this.state.monthYear,type:"month",min:"2021-03",onChange:this.onChangeMonthYear})})]})}),Object(m.jsx)("div",{children:Object(m.jsx)(ht,{notes:this.props.notes,projects:e,categories:t,projects_filter:this.state.project,monthYear_filter:this.state.monthYear,updateNote:this.props.updateNote,deleteNote:this.props.deleteNote})})]})}}]),n}(a.Component),ut=Object(F.a)(),dt=function(e){Object(h.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).updateNote=function(e){var t=a.getAuthToken();d.a.put(H.NOTES+"/".concat(e.id),{project_id:e.project_id,category_id:e.category_id,description:e.description,hours:e.hours,date:e.date},t).then((function(t){a.props.dispatch(I(e.id))})).catch((function(e){return console.log(e)})),ut.go(0)},a.deleteNote=function(e){var t=a.getAuthToken();d.a.delete(H.NOTES+"/".concat(e),t).then((function(t){a.props.dispatch(E(e))})).catch((function(e){return console.log(e)}))},a.state={loading:!0},a}return Object(i.a)(n,[{key:"getAuthToken",value:function(){return{baseURL:H.API,headers:{Authorization:localStorage.getItem("token")}}}},{key:"getNotes",value:function(){var e=this,t=this.getAuthToken();d.a.get(H.NOTES,t).then((function(t){e.props.dispatch(A(t.data)),e.setState({loading:!1})})).catch((function(e){return console.log(e.message)}))}},{key:"getProjects",value:function(){var e=this,t=this.getAuthToken();d.a.get(H.PROJECTS,t).then((function(t){e.props.dispatch(U(t.data))})).catch((function(e){return console.log(e.message)}))}},{key:"getCategories",value:function(){var e=this,t=this.getAuthToken();d.a.get(H.CATEGORIES,t).then((function(t){e.props.dispatch(R(t.data))})).catch((function(e){return console.log(e.message)}))}},{key:"componentDidMount",value:function(){this.getNotes(),this.getProjects(),this.getCategories()}},{key:"render",value:function(){return console.log(this.props.notes,"notes"),Object(m.jsx)("div",{children:Object(m.jsx)("div",{className:"container",children:this.state.loading?Object(m.jsx)(K,{}):Object(m.jsx)(lt,{notes:this.props.notes,projects:this.props.projects,categories:this.props.categories,updateNote:this.updateNote,deleteNote:this.deleteNote})})})}}]),n}(a.Component),jt=Object(j.b)((function(e){return{notes:e.notes,projects:e.projects,categories:e.categories}}))(dt),pt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,107)).then((function(t){var n=t.getCLS,a=t.getFID,o=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),o(e),r(e),s(e)}))},bt=Object(qe.d)(tt,Object(qe.a)(Je.a));localStorage.getItem("token")?bt.dispatch({type:D}):bt.dispatch(Y()),s.a.render(Object(m.jsx)(j.a,{store:bt,children:Object(m.jsx)(De.a,{children:Object(m.jsxs)("div",{children:[Object(m.jsx)(B.a,{}),Object(m.jsx)(Ee,{}),Object(m.jsx)(Ae,{}),Object(m.jsxs)(nt.d,{children:[Object(m.jsx)(nt.b,{exact:!0,path:"/",component:ve}),Object(m.jsx)(nt.b,{path:"/login",component:q}),Object(m.jsx)(nt.b,{path:"/logout",component:Ce}),Object(m.jsx)(nt.b,{path:"/settings",component:ke}),Object(m.jsx)(nt.b,{path:"/reports",component:it}),Object(m.jsx)(nt.b,{path:"/my-report",component:jt}),Object(m.jsx)(nt.b,{path:"/manage",component:Ge}),Object(m.jsx)(nt.b,{path:"/404",component:_e}),Object(m.jsx)(nt.a,{to:"/404"})]})]})})}),document.getElementById("root")),pt()}},[[96,1,2]]]);
//# sourceMappingURL=main.12546ebf.chunk.js.map